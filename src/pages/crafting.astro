---
import Layout from '../layouts/Layout.astro';
import PageHeader from '../components/PageHeader.astro';
import Section from '../components/Section.astro';
import WorkbenchSelector from '../components/WorkbenchSelector.astro';
import CraftingItem from '../components/CraftingItem.astro';

const workbenches = [
  {
    id: "basic",
    name: "–ë–∞–∑–æ–≤—ã–π –∫—Ä–∞—Ñ—Ç",
    icon: "üî®",
    level: 0,
    description: "–ü—Ä–µ–¥–º–µ—Ç—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–µ–∑ –≤–µ—Ä—Å—Ç–∞–∫–∞"
  },
  {
    id: "wb1",
    name: "–í–µ—Ä—Å—Ç–∞–∫ 1 —É—Ä–æ–≤–Ω—è",
    icon: "‚öíÔ∏è",
    level: 1,
    description: "–ë–∞–∑–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
  },
  {
    id: "wb2",
    name: "–í–µ—Ä—Å—Ç–∞–∫ 2 —É—Ä–æ–≤–Ω—è",
    icon: "üõ†Ô∏è",
    level: 2,
    description: "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –æ—Ä—É–∂–∏–µ –∏ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ"
  },
  {
    id: "wb3",
    name: "–í–µ—Ä—Å—Ç–∞–∫ 3 —É—Ä–æ–≤–Ω—è",
    icon: "‚öîÔ∏è",
    level: 3,
    description: "–≠–ª–∏—Ç–Ω–æ–µ –æ—Ä—É–∂–∏–µ –∏ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ"
  }
];

const craftingItems = {
  basic: [
    {
      name: "–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è –¥–≤–µ—Ä—å",
      icon: "üö™",
      materials: [
        { name: "–î–µ—Ä–µ–≤–æ", amount: 300 }
      ],
      craftTime: "10 —Å–µ–∫",
      category: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ"
    },
    {
      name: "–¢–æ–ø–æ—Ä",
      icon: "ü™ì",
      materials: [
        { name: "–î–µ—Ä–µ–≤–æ", amount: 200 },
        { name: "–ö–∞–º–µ–Ω—å", amount: 100 }
      ],
      craftTime: "15 —Å–µ–∫",
      category: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã"
    }
  ],
  wb1: [
    {
      name: "–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è –¥–≤–µ—Ä—å",
      icon: "üö™",
      materials: [
        { name: "–ú–µ—Ç–∞–ª–ª", amount: 200 },
        { name: "–®–µ—Å—Ç–µ—Ä–Ω–∏", amount: 2 }
      ],
      craftTime: "30 —Å–µ–∫",
      category: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ"
    },
    {
      name: "–†–µ–≤–æ–ª—å–≤–µ—Ä",
      icon: "üî´",
      materials: [
        { name: "–ú–µ—Ç–∞–ª–ª", amount: 125 },
        { name: "–ü—Ä—É–∂–∏–Ω—ã", amount: 1 }
      ],
      craftTime: "60 —Å–µ–∫",
      category: "–û—Ä—É–∂–∏–µ"
    }
  ],
  wb2: [
    {
      name: "–ü–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∏–Ω—Ç–æ–≤–∫–∞",
      icon: "üéØ",
      materials: [
        { name: "–ú–µ—Ç–∞–ª–ª", amount: 450 },
        { name: "–ü—Ä—É–∂–∏–Ω—ã", amount: 3 },
        { name: "–®–µ—Å—Ç–µ—Ä–Ω–∏", amount: 2 }
      ],
      craftTime: "120 —Å–µ–∫",
      category: "–û—Ä—É–∂–∏–µ"
    },
    {
      name: "–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è –±—Ä–æ–Ω—è",
      icon: "üõ°Ô∏è",
      materials: [
        { name: "–ú–µ—Ç–∞–ª–ª", amount: 300 },
        { name: "–í–µ—Ä–µ–≤–∫–∞", amount: 2 }
      ],
      craftTime: "90 —Å–µ–∫",
      category: "–ë—Ä–æ–Ω—è"
    }
  ],
  wb3: [
    {
      name: "AK-47",
      icon: "üî´",
      materials: [
        { name: "–ú–µ—Ç–∞–ª–ª", amount: 550 },
        { name: "–ü—Ä—É–∂–∏–Ω—ã", amount: 4 },
        { name: "–®–µ—Å—Ç–µ—Ä–Ω–∏", amount: 3 }
      ],
      craftTime: "180 —Å–µ–∫",
      category: "–û—Ä—É–∂–∏–µ"
    },
    {
      name: "–†–∞–∫–µ—Ç–Ω–∏—Ü–∞",
      icon: "üöÄ",
      materials: [
        { name: "–ú–µ—Ç–∞–ª–ª", amount: 500 },
        { name: "–¢—Ä—É–±—ã", amount: 3 },
        { name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏", amount: 2 }
      ],
      craftTime: "180 —Å–µ–∫",
      category: "–û—Ä—É–∂–∏–µ"
    }
  ]
};
---

<Layout title="–ö—Ä–∞—Ñ—Ç - Ultimate Rust Wiki">
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="bg-rust-gray rounded-lg p-8">
      <PageHeader 
        title="–°–∏—Å—Ç–µ–º–∞ –∫—Ä–∞—Ñ—Ç–∞" 
        subtitle="–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã –∏ –≤–µ—Ä—Å—Ç–∞–∫–∏" 
      />
      
      <Section title="–í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å—Ç–∞–∫">
        <WorkbenchSelector workbenches={workbenches} />
      </Section>

      {workbenches.map(bench => (
        <div id={bench.id} class="crafting-section hidden">
          <Section title={bench.name}>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {craftingItems[bench.id].map(item => (
                <CraftingItem {...item} />
              ))}
            </div>
          </Section>
        </div>
      ))}
    </div>
  </main>
</Layout>

<script>
  function showWorkbench(id: string) {
    document.querySelectorAll('.crafting-section').forEach(section => {
      section.classList.add('hidden');
    });
    document.getElementById(id)?.classList.remove('hidden');
  }

  // Show first workbench by default
  showWorkbench('basic');

  // Add click handlers to workbench buttons
  document.querySelectorAll('[data-workbench]').forEach(button => {
    button.addEventListener('click', (e) => {
      const target = e.currentTarget as HTMLElement;
      const workbenchId = target.dataset.workbench;
      if (workbenchId) {
        showWorkbench(workbenchId);
      }
    });
  });
</script>